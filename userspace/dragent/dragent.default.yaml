#
# WARNING: Sysdig Cloud Agent default configuration, don't edit. Please use "dragent.yaml" instead
#
jmx:
  default_beans:
    - query: "java.lang:type=Memory"
      attributes:
        - name: HeapMemoryUsage
          alias: jvm.heap
          unit: B
        - name: NonHeapMemoryUsage
          alias: jvm.nonHeap
          unit: B
    - query: "java.lang:type=GarbageCollector,*"
      attributes:
        - name: CollectionCount
          type: counter
          alias: jvm.gc.{name}.count
        - name: CollectionTime
          type: counter
          alias: jvm.gc.{name}.time
          unit: ms
    - query: "java.lang:type=ClassLoading"
      attributes:
        - name: LoadedClassCount
          alias: jvm.class.loaded
        - name: UnloadedClassCount
          alias: jvm.class.unloaded
    - query: "java.lang:type=Threading"
      attributes:
        - name: ThreadCount
          alias: jvm.thread.count
        - name: DaemonThreadCount
          alias: jvm.thread.daemon
  per_process_beans:
    cassandra:
      pattern: "cassandra"
      beans:
        - query: "org.apache.cassandra.db:type=StorageProxy"
          attributes:
            - name: RecentWriteLatencyMicros
              alias: cassandra.write.latency
              unit: us
            - name: RecentReadLatencyMicros
              alias: cassandra.read.latency
              unit: us
            - name: WriteOperations
              type: counter
              alias: cassandra.write.count
            - name: ReadOperations
              type: counter
              alias: cassandra.read.count
        - query: "org.apache.cassandra.db:type=CompactionManager"
          attributes:
            - name: TotalCompactionsCompleted
              type: counter
              alias: cassandra.compactions.count
            - name: PendingTasks
              alias: cassandra.compactions.pending
            - name: TotalBytesCompacted
              type: counter
              alias: cassandra.compactions.bytes
              unit: B
        - query: "org.apache.cassandra.db:type=Caches"
          attributes:
            - name: KeyCacheHits
              type: counter
              alias: cassandra.keycache.hits
            - name: KeyCacheRequests
              type: counter
              alias: cassandra.keycache.requests
            - name: RowCacheHits
              type: counter
              alias: cassandra.rowcache.hits
            - name: RowCacheRequests
              type: counter
              alias: cassandra.rowcache.requests
        - query: "org.apache.cassandra.internal:type=HintedHandoff"
          attributes:
            - name: PendingTasks
              alias: cassandra.hintedhandoff.pending
            - name: ActiveCount
              alias: cassandra.hintedhandoff.active
        - query: "org.apache.cassandra.request:type=ReadStage"
          attributes:
            - name: PendingTasks
              alias: cassandra.read.pending
        - query: "org.apache.cassandra.request:type=MutationStage"
          attributes:
            - name: PendingTasks
              alias: cassandra.write.pending
    tomcat:
      pattern: "catalina"
      beans:
        - query: "Catalina:type=Cache,*"
          attributes:
            - name: accessCount
              alias: tomcat.access.count
              type: counter
            - name: hitsCount
              alias: tomcat.hits.count
              type: counter
        - query: "Catalina:type=GlobalRequestProcessor,*"
          attributes:
            - name: bytesReceived
              alias: tomcat.bytes.received
              type: counter
            - name: errorCount
              alias: tomcat.error.count
              type: counter
            - name: maxTime
              alias: tomcat.max.time
            - name: requestCount
              alias: tomcat.request.count
              type: counter
            - name: processingTime
              alias: tomcat.processing.time
              type: counter
              unit: ms
            - name: bytesSent
              alias: tomcat.bytes.sent
              type: counter
        - query: "Catalina:type=Manager,*"
          attributes:
            - name: activeSessions
              alias: tomcat.sessions.active
              type: counter
            - name: maxActive
              alias: tomcat.session.max.active
            - name: expiredSessions
              alias: tomcat.sessions.expired
              type: counter
            - name: sessionCreateRate
              alias: tomcat.session.create.rate
            - name: sessionExpireRate
              alias: tomcat.session.expire.rate
        - query: "Catalina:type=ThreadPool,*"
          attributes:
            - name: maxThreads
              alias: tomcat.threads.max
            - name: currentThreadCount
              alias: tomcat.thread.current.count
            - name: currentThreadsBusy
              alias: tomcat.threads.current.busy
        - query: "Catalina:type=JspMonitor,*"
          attributes:
            - name: jspCount
              alias: tomcat.jsp.count
              type: counter
            - name: jspReloadCount
              alias: tomcat.jsp.reload.count
              type: counter
        - query: "Catalina:j2eeType=Servlet,*"
          attributes:
            - name: processingTime
              alias: tomcat.servlet.processing.time
              type: counter
            - name: errorCount
              alias: tomcat.servlet.error.count
              type: counter
            - name: requestCount
              alias: tomcat.servlet.request.count
              type: counter
        - query: "Catalina:type=DataSource,*"
          attributes:
            - name: numActive
              alias: tomcat.datasource.connection.active
              type: counter
            - name: numIdle
              alias: tomcat.datasource.connection.idle
              type: counter
            - name: maxActive
              alias: tomcat.datasource.connection.max.active
            - name: maxIdle
              alias: tomcat.datasource.connection.max.idle
            - name: minIdle
              alias: tomcat.datasource.connection.min.idle
    activemq:
      pattern: "activemq"
      beans:
        - query: "org.apache.activemq:type=Broker,brokerName=*"
          attributes:
            - name: StorePercentUsage
              alias: activemq.broker.store.percentage.usage
              unit: "%100"
            - name: TempPercentUsage
              alias: activemq.broker.temp.percentage.usage
              unit: "%100"
            - name: MemoryPercentUsage
              alias: activemq.broker.memory.percentage.usage 
              unit: "%100"
            - name: TotalConnectionsCount
              alias: activemq.broker.total.connections.count
            - name: TotalConsumerCount
              alias: activemq.broker.total.consumer.count
            - name: TotalDequeueCount
              alias: activemq.broker.total.dequeue.count
            - name: TotalEnqueueCount
              alias: activemq.broker.total.enqueue.count
            - name: TotalMessageCount
              alias: activemq.broker.total.message.count
            - name: TotalProducerCount
              alias: activemq.broker.total.producer.count
        - query: "org.apache.activemq:type=Broker,brokerName=*,destinationType=Queue,*"
          attributes:
            - name: AverageEnqueueTime
              alias: activemq.queue.average.enqueue.time
            - name: ConsumerCount
              alias: activemq.queue.consumer.count
            - name: DequeueCount
              alias: activemq.queue.dequeue.count
              type: counter
            - name: DispatchCount
              alias: activemq.queue.dispatch.count
              type: counter
            - name: EnqueueCount 
              alias: activemq.queue.enqueue.count
              type: counter
            - name: ExpiredCount
              alias: activemq.queue.expired.count
              type: counter
            - name: InFlightCount
              alias: activemq.queue.inflight.count
              type: counter
            - name: MemoryPercentUsage
              alias: activemq.queue.memory.percentage.usage
              unit: "%100"
            - name: ProducerCount
              alias: activemq.queue.producer.count
            - name: QueueSize
              alias: activemq.queue.size
            - name: MaxEnqueueTime
              alias: activemq.queue.max.enqueue.time
            - name: MinEnqueueTime
              alias: activemq.queue.min.enqueue.time
        - query: "org.apache.activemq:type=Broker,brokerName=*,destinationType=Topic,*"
          attributes:
            - name: AverageEnqueueTime
              alias: activemq.topic.average.enqueue.time
            - name: ConsumerCount
              alias: activemq.topic.consumer.count
            - name: DequeueCount
              alias: activemq.topic.dequeue.count
              type: counter
            - name: DispatchCount
              alias: activemq.topic.dispatch.count
              type: counter
            - name: EnqueueCount
              alias: activemq.topic.enqueue.count
              type: counter
            - name: ExpiredCount
              alias: activemq.topic.expired.count
              type: counter
            - name: InFlightCount
              alias: activemq.topic.inflight.count
              type: counter
            - name: MemoryPercentUsage
              alias: activemq.topic.memory.percentage.usage
              unit: "%100"
            - name: ProducerCount
              alias: activemq.topic.producer.count
            - name: QueueSize
              alias: activemq.topic.size
            - name: MaxEnqueueTime
              alias: activemq.topic.max.enqueue.time
            - name: MinEnqueueTime
              alias: activemq.topic.min.enqueue.time
    zookeeper:
      pattern: "zookeeper"
      beans:
        - query: "org.apache.ZooKeeperService:name1=InMemoryDataTree,*"
          attributes:
            - NodeCount
            - WatchCount
    kafka:
      pattern: "kafka"
      beans:
        - query: "kafka.server:type=BrokerTopicMetrics,name=BytesOutPerSec"
          attributes:
            - name: MeanRate
              alias: kafka.net.bytes_out
        - query: "kafka.server:type=BrokerTopicMetrics,name=BytesInPerSec"
          attributes:
            - name: MeanRate
              alias: kafka.net.bytes_in
        - query: "kafka.server:type=BrokerTopicMetrics,name=MessagesInPerSec"
          attributes:
            - name: MeanRate
              alias: kafka.messages_in
        - query: "kafka.server:type=BrokerTopicMetrics,name=BytesRejectedPerSec"
          attributes:
            - name: MeanRate
              alias: kafka.net.bytes_rejected
        - query: "kafka.server:type=BrokerTopicMetrics,name=FailedFetchRequestsPerSec"
          attributes:
            - name: MeanRate
              alias: kafka.request.fetch.failed
        - query: "kafka.server:type=BrokerTopicMetrics,name=FailedProduceRequestsPerSec"
          attributes:
            - name: MeanRate
              alias: kafka.request.produce.failed
        - query: "kafka.network:type=RequestMetrics,name=TotalTimeMs,request=Produce"
          attributes:
            - name: Mean
              alias: kafka.request.produce.time.avg
            - name: 99thPercentile
              alias: kafka.request.produce.time.99percentile
        - query: "kafka.network:type=RequestMetrics,name=TotalTimeMs,request=Fetch"
          attributes:
            - name: Mean
              alias: kafka.request.fetch.time.avg
            - name: 99thPercentile
              alias: kafka.request.fetch.time.99percentile
        - query: "kafka.network:type=RequestMetrics,name=TotalTimeMs,request=UpdateMetadata"
          attributes:
            - name: Mean
              alias: kafka.request.update_metadata.time.avg
            - name: 99thPercentile
              alias: kafka.request.update_metadata.time.99percentile
        - query: "kafka.network:type=RequestMetrics,name=TotalTimeMs,request=Metadata"
          attributes:
            - name: Mean
              alias: kafka.request.metadata.time.avg
            - name: 99thPercentile
              alias: kafka.request.metadata.time.99percentile
        - query: "kafka.network:type=RequestMetrics,name=TotalTimeMs,request=Offsets"
          attributes:
            - name: Mean
              alias: kafka.request.offsets.time.avg
            - name: 99thPercentile
              alias: kafka.request.offsets.time.99percentile
        - query: "kafka.server:type=KafkaRequestHandlerPool,name=RequestHandlerAvgIdlePercent"
          attributes:
            - name: MeanRate
              alias: kafka.request.handler.avg.idle.pct
        - query: "kafka.server:type=ReplicaManager,name=IsrShrinksPerSec"
          attributes:
            - name: MeanRate
              alias: kafka.replication.isr_shrinks
        - query: "kafka.server:type=ReplicaManager,name=IsrExpandsPerSec"
          attributes:
            - name: MeanRate
              alias: kafka.replication.isr_expands
        - query: "kafka.controller:type=ControllerStats,name=LeaderElectionRateAndTimeMs"
          attributes:
            - name: MeanRate
              alias: kafka.replication.leader_elections
        - query: "kafka.controller:type=ControllerStats,name=UncleanLeaderElectionsPerSec"
          attributes:
            - name: MeanRate
              alias: kafka.replication.unclean_leader_elections
    hbase:
      pattern: "hbase"
      beans:
        - query: "Hadoop:service=HBase,name=MetricsSystem,sub=Stats"
          attributes:
            - DroppedPubAll
            - NumActiveSinks
            - NumActiveSources
            - NumAllSinks
            - NumAllSources
            - PublishNumOps
            - SnapshotNumOps
        - query: "Hadoop:service=HBase,name=RegionServer,sub=Server"
          attributes:
            - Append_num_ops
            - Delete_num_ops
            - FlushTime_num_ops
            - Get_num_ops
            - Increment_num_ops
            - Mutate_num_ops
            - Replay_num_ops
            - SplitTime_num_ops
            - blockCacheCount
            - blockCacheEvictionCount
            - blockCacheExpressHitPercent
            - blockCacheFreeSize
            - blockCacheHitCount
            - blockCacheMissCount
            - compactedCellsCount
            - compactedCellsSize
            - compactionQueueLength
            - flushQueueLength
            - flushedCellsCount
            - readRequestCount
            - slowAppendCount
            - slowDeleteCount
            - slowGetCount
            - slowIncrementCount
            - slowPutCount
        - query: "Hadoop:service=HBase,name=UgiMetrics"
          attributes:
            - LoginFailureNumOps
            - LoginSuccessNumOps
        - query: "Hadoop:service=HBase,name=Master,sub=Balancer"
          attributes:
            - BalancerCluster_num_ops
        - query: "Hadoop:service=HBase,name=Master,sub=AssignmentManger"
          attributes:
            - Assign_num_ops
            - BulkAssign_num_ops
    elasticsearch:
      pattern: "elasticsearch"
