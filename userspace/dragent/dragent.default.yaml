#
# WARNING: Sysdig Cloud Agent default configuration, don't edit. Please use "dragent.yaml" instead
#
jmx:
  default_beans:
    - query: "java.lang:type=Memory"
      attributes:
        - HeapMemoryUsage
        - NonHeapMemoryUsage
    - query: "java.lang:type=GarbageCollector,*"
      attributes:
        - name: CollectionCount
          type: counter
        - name: CollectionTime
          type: counter
    - query: "java.lang:type=ClassLoading"
      attributes:
        - LoadedClassCount
        - UnloadedClassCount
    - query: "java.lang:type=Threading"
      attributes:
        - ThreadCount
        - DaemonThreadCount
  per_process_beans:
    cassandra:
      pattern: "cassandra"
      beans:
        - query: "org.apache.cassandra.db:type=StorageProxy"
          attributes:
            - name: RecentWriteLatencyMicros
              alias: cassandra.write.latency
            - name: RecentReadLatencyMicros
              alias: cassandra.read.latency
            - name: WriteOperations
              type: counter
              alias: cassandra.write.count
            - name: ReadOperations
              type: counter
              alias: cassandra.read.count
        - query: "org.apache.cassandra.db:type=CompactionManager"
          attributes:
            - name: TotalCompactionsCompleted
              type: counter
              alias: cassandra.compactions.count
            - name: PendingTasks
              alias: cassandra.compactions.pending
            - name: TotalBytesCompacted
              type: counter
              alias: cassandra.compactions.bytes
        - query: "org.apache.cassandra.db:type=Caches"
          attributes:
            - name: KeyCacheHits
              type: counter
              alias: cassandra.keycache.hits
            - name: KeyCacheRequests
              type: counter
              alias: cassandra.keycache.requests
            - name: RowCacheHits
              type: counter
              alias: cassandra.rowcache.hits
            - name: RowCacheRequests
              type: counter
              alias: cassandra.rowcache.requests
        - query: "org.apache.cassandra.internal:type=HintedHandoff"
          attributes:
            - name: PendingTasks
              alias: cassandra.hintedhandoff.pending
            - name: ActiveCount
              alias: cassandra.hintedhandoff.active
        - query: "org.apache.cassandra.request:type=ReadStage"
          attributes:
            - name: PendingTasks
              alias: cassandra.read.pending
        - query: "org.apache.cassandra.request:type=MutationStage"
          attributes:
            - name: PendingTasks
              alias: cassandra.write.pending
    tomcat:
      pattern: "catalina"
      beans:
        - query: "Catalina:type=Cache,*"
          attributes:
            - accessCount
            - cacheSize
            - hitsCount
        - query: "Catalina:type=GlobalRequestProcessor,*"
          attributes:
            - errorCount
            - requestCount
            - processingTime
        - query: "Catalina:type=Manager,*"
          attributes:
            - activeSessions
            - expiredSessions
            - processingTime
            - rejectedSessions
        - query: "Catalina:type=ThreadPool,*"
          attributes:
            - acceptorThreadCount
            - currentThreadCount
            - currentThreadBusy
    activemq:
      pattern: "activemq"
      beans:
        - query: "org.apache.activemq:Type=Broker,*"
          attributes:
            - TotalConsumerCount
            - TotalDequeueCount
            - TotalEnqueueCount
            - TotalMessageCount
            - TotalProducerCount
        - query: "org.apache.activemq:Type=Queue,*"
          attributes:
            - ConsumerCount
            - AverageEnqueueTime
            - DequeueCount 
            - DispatchCount
            - EnqueueCount 
            - ExpiredCount
            - InFlightCount
            - MemoryPercentUsage
            - ProducerCount 
            - QueueSize
        - query: "org.apache.activemq:Type=Topic,*"
          attributes:
            - ConsumerCount
            - AverageEnqueueTime
            - DequeueCount 
            - DispatchCount
            - EnqueueCount 
            - ExpiredCount
            - InFlightCount
            - MemoryPercentUsage
            - ProducerCount 
            - QueueSize
    zookeeper:
      pattern: "zookeeper"
      beans:
        - query: "org.apache.ZooKeeperService:name1=InMemoryDataTree,*"
          attributes:
            - NodeCount
            - WatchCount
    kafka:
      pattern: "kafka"
      beans:
        - query: '"kafka.server":type="BrokerTopicMetrics",*'
          attributes:
            - Count
        - query: '"kafka.server":type="DelayedFetchRequestMetrics",*'
          attributes:
            - Count
        - query: '"kafka.server":type="DelayedProducerRequestMetrics",*'
          attributes:
            - Count
        - query: '"kafka.server":type="FetchRequestPurgatory",*'
          attributes:
            - Value
        - query: '"kafka.server":type="ProducerRequestPurgatory",*'
          attributes:
            - Value
    hbase:
      pattern: "hbase"
      beans:
        - query: "Hadoop:service=HBase,name=MetricsSystem,sub=Stats"
          attributes:
            - DroppedPubAll
            - NumActiveSinks
            - NumActiveSources
            - NumAllSinks
            - NumAllSources
            - PublishNumOps
            - SnapshotNumOps
        - query: "Hadoop:service=HBase,name=RegionServer,sub=Server"
          attributes:
            - Append_num_ops
            - Delete_num_ops
            - FlushTime_num_ops
            - Get_num_ops
            - Increment_num_ops
            - Mutate_num_ops
            - Replay_num_ops
            - SplitTime_num_ops
            - blockCacheCount
            - blockCacheEvictionCount
            - blockCacheExpressHitPercent
            - blockCacheFreeSize
            - blockCacheHitCount
            - blockCacheMissCount
            - compactedCellsCount
            - compactedCellsSize
            - compactionQueueLength
            - flushQueueLength
            - flushedCellsCount
            - readRequestCount
            - slowAppendCount
            - slowDeleteCount
            - slowGetCount
            - slowIncrementCount
            - slowPutCount
        - query: "Hadoop:service=HBase,name=UgiMetrics"
          attributes:
            - LoginFailureNumOps
            - LoginSuccessNumOps
        - query: "Hadoop:service=HBase,name=Master,sub=Balancer"
          attributes:
            - BalancerCluster_num_ops
        - query: "Hadoop:service=HBase,name=Master,sub=AssignmentManger"
          attributes:
            - Assign_num_ops
            - BulkAssign_num_ops
    elasticsearch:
      pattern: "elasticsearch"
